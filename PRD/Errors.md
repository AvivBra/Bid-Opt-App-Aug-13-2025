# PRD – Validations & Error Messages

מסמך זה מגדיר את כל בדיקות הוולידציה והודעות השגיאה בכל שלבי המערכת **Bid & Budget Optimizer**.

---

## 1. שלב 1 – Upload

**בדיקות:**
1. אימות פורמט קובץ – חייב להיות Excel (`.xlsx`) או CSV.
2. בדיקת גודל קובץ – לא יעלה על 40MB.
3. בדיקת כותרות – הכותרות חייבות להתאים במדויק לרשימת הכותרות הנדרשות (לפי סוג הקובץ: Bulk File או Template File).

**הודעות שגיאה:**

| קוד | הודעה | תנאי הפעלה | צבע |
|-----|-------|------------|------|
| S1-001 | `File "<file_name>" must be in Excel or CSV format.` | קובץ שהועלה אינו `.xlsx` או `.csv` | אדום |
| S1-002 | `File "<file_name>" must not exceed 40MB.` | גודל קובץ מעל 40MB | אדום |
| S1-003 | `File "<file_name>" titles are incorrect.` | כותרות קובץ שונות מהכותרות הנדרשות | אדום |

---

## 2. שלב 2 – Validate Portfolios

### בדיקות:
1. פורמט קובץ – חייב להיות Excel או CSV
2. נוכחות נתונים – חייבת להיות לפחות שורה אחת אחרי הכותרות
3. כותרות – חייבות להתאים למבנה הטמפלט
4. קריאות קובץ – המערכת חייבת להצליח לקרוא את הקובץ
5. ולידציית ערכים בקומפלישן טמפלט

### הודעות שגיאה:

**S2-001** (אדום)
- הודעה: `Template format should only be Excel or CSV.`
- תנאי: פורמט קובץ שגוי

**S2-002** (אדום)
- הודעה: `Template does not contain data.`
- תנאי: אין שורות נתונים אחרי הכותרות

**S2-003** (אדום)
- הודעה: `Template titles are incorrect.`
- תנאי: כותרות שונות מהנדרש

**S2-004** (אדום)
- הודעה: `System cannot read template file.`
- תנאי: שגיאה בקריאת הקובץ

**S2-005** (אדום)
- הודעה: `All portfolios are marked as "Ignore". Cannot continue processing.`
- תנאי: כל הפורטפוליוז מסומנים כ-Ignore

**S2-006** (אדום)
- הודעה: `After first cleanse no rows are left in bulk file.`
- תנאי: אחרי הניקוי הראשוני לא נשארו שורות

**S2-007** (אדום)
- הודעה: `Missing or invalid values found. Please download template, fill and upload again.`
- תנאי: ערכים חסרים או שגויים בקומפלישן טמפלט



---

## 3. שלב 3 – Optimization & Output

**בדיקות ודיווחים:**
1. שגיאות חישוב – אם בעת עיבוד שורות יש שגיאות (למשל ערכים לא תקינים לחישוב).
2. זיהוי בידים מחוץ לטווח – Bid נמוך מ־0.02 או גבוה מ־1.25.

**הודעות:**

| קוד | הודעה | תנאי הפעלה | צבע |
|-----|-------|------------|------|
| S3-001 | `Please note: <N> calculation errors in <Optimization_Type>.` | יש שגיאות חישוב | ורוד |
| S3-002 | `Bids outside range: <N> rows with bid <0.02 or >1.25.` | מספר בידים מחוץ לטווח המוגדר | כחול/מידע |

---

## 4. פורמט הצגת ההודעות

- **הודעות שגיאה (Error)** – צבע אדום, עוצרות את ההתקדמות לשלב הבא.
- **הודעות אזהרה (Warning)** – צבע ורוד, מציינות בעיות אך לא עוצרות את התהליך.
- **הודעות מידע (Info)** – צבע כחול, להצגת נתונים סטטיסטיים או דיווחים.

---

## 5. תרחישי קצה
- העלאת קובץ ריק (אין אפילו כותרות) – נחשב ככותרות שגויות (S1-003 / S2-003).
- פורטפוליו אחד לפחות חייב להישאר ללא `Ignore` כדי להמשיך (S2-005).
- בשלב 3, אם יש גם שגיאות חישוב וגם בידים מחוץ לטווח, יוצגו שתי ההודעות במקביל.

---

## 6. גרסת מסמך
- גרסה: 1.0
- תאריך: YYYY-MM-DD
- מחבר: [שם מחבר]
