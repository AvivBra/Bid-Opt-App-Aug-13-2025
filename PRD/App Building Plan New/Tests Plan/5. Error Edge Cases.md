# בדיקות שגיאות ומקרי קצה

## בדיקות שגיאות קבצים

### קבצים לא תקינים
| מה לבדוק | איך | הודעה צפויה |
|-----------|------|--------------|
| לא Excel | העלה .txt | "File must be Excel or CSV format" |
| גדול מדי | העלה 50MB | "File exceeds 40MB limit" |
| חסרות כותרות | Excel בלי Campaign Name | "Missing required columns: Campaign Name" |
| Sheet חסר | Excel בלי Sponsored Products | "Sheet 'Sponsored Products Campaigns' not found" |

### Completion Template שגוי
| מה לבדוק | איך | הודעה צפויה |
|-----------|------|--------------|
| Base Bid ריק | השאר ריק | "Base Bid is required" |
| Base Bid לא מספר | כתוב "abc" | "Invalid Base Bid: must be numeric" |
| Portfolio לא קיים | הוסף portfolio חדש | "Portfolio 'X' not found in bulk" |
| כולם Ignore | Ignore בכולם | "All portfolios marked as Ignore" |

## מקרי קצה

### Virtual Map
1. **0 portfolios בטמפלט**
   - צפוי: "Template is empty"

2. **1000 portfolios**
   - צפוי: עובד אבל איטי

3. **שמות עם תווים מיוחדים**
   - Portfolio: "Test#$%&"
   - צפוי: עובד

### Completion Loop
1. **מחזור 1**: 10 חסרים → מלא 5
2. **מחזור 2**: 5 חסרים → מלא 3
3. **מחזור 3**: 2 חסרים → מלא 2
4. **צפוי**: "All complete" אחרי 3 מחזורים

### ערכי Base Bid
| ערך | צפוי |
|-----|------|
| 0 | נדחה - "Must be positive" |
| 0.01 | מתקבל |
| 999999 | מתקבל |
| -5 | נדחה - "Must be positive" |
| 1.234567 | מתקבל, מעוגל ל-1.23 |

## בדיקות מפתח

### בדיקת error handling
```python
# וודא שכל שגיאה נתפסת
try:
    # קוד שגוי
except Exception as e:
    assert "friendly message" in str(e)
```

### בדיקת תווים מיוחדים
- Portfolio: "Test & Co."
- Campaign: "50% Sale!"
- צפוי: עובד בלי בעיות

## סימני כשלון
❌ קריסה בלי הודעה
❌ הודעות שגיאה טכניות
❌ תקיעה בלולאה
❌ איבוד מידע